
* Annotation workflow


** Start: Annotated corpus



 #+BEGIN_SRC js
{ "lines": [
    "Cryst. Res. Technol. 50, No. 7, 566–573 (2015) / DOI 10.1002/crat.201500063",
    "Elliptic NdCrO_{3} microplate by a simple one-step hydrothermal",
    "synthesis route and its characterization and magnetic",
    "proper ties",
    "Chengpeng Yao, Youjin Zhang∗, Yun Fan, Maozhong Zhou, and Hai Wu",


  "mentions": [
    [1,   1,   "entity",               "Nd(NO_{3})_{3}¿-127;6H_{2}O", [[131, 34, 18]]],
    [2,   1,   "entity",               "Neodymium nitrate",    [[125, 0, 16]]],
    [3,   1,   "entity/amount",        "4.48 mmol",            [[131, 24, 8]]],
    [4,   1,   "entity/amount",        "99.0%),",              [[125, 40, 6]]],
    [5,   2,   "entity",               "water",                [[132, 29, 4]]],
    [6,   2,   "entity/amount",        "10 mL",                [[132, 13, 4]]],
    [7,   2,   "entity/descriptor",    "distilled",            [[132, 19, 8]]],

  "relations": [
    [cluster:1,      "connectsTo",    cluster:20],

  "properties": [
    [cluster:1, "role", "recipe/entity"],
    [cluster:1, "mongoId",    "5759e995a15158513d86d53f"],
    [cluster:1, "isTarget",   false],

    ...
}

 #+END_SRC


 #+BEGIN_EXAMPLE


 - Starting with 200+ Annotated PDFs in MongoDB
                 |
                 | - mongo-export to json
                 |
                 v
           predsynth-papers.json
                 |
                 |
                 |
                 v

> bin/works docseg --align-predsynth-papers ./predsynth-papers.json

                 |
                 |              +-  WatrWorks can read the Predsynth annotated-paper collection (via json
                 +--------------|   export), and align those annotations based on text-similarity.
                 |              +-  Hopefully, that process is a one-time deal.
                 |
                 |
           +-----------+
           |           |<---------------------+
           | Annotated |                      |
           | WatrWorks |                      |
           | .json(s)  |       +--------------+-------------+
           |           |       |  Cleanup and adjustments are required. Some text could not
           |           |----->-|  be automatically aligned, and there are errors
           +-----------+       |  in the predsynth database that need correcting
                 |             +----------------------------+
                 |
                 |
                 v
           +-----------+
           |           |
           | WatrWorks |
           | Annotated |
           | Docsegs   |
           |           |
           |           |
           +-----------+


Once the current set of annotated documents is sufficiently cleaned
and errors have been fixed,



         WatrWorks docseg --annotations ./prior.docseg.json




            +-------------------------------+                                             +-----------------------+
            |  MIT continuing analysis      | mongo-export             github updates     |  UMass:               |
    +-------+  and annotation in predsynth  +-------------+      +----------------------- +  WatrWorks updates    |
    |       |   (in MongoDB)                |             |      |                        |                       |
    |       +----------+--------------------+             |      |                        +-----------------------+
    |                  ^                                  |      |
    |                  |                                  |      |
    |                  |                                  v      v
    |                  |
    |                  |                     >bin/works -merge predsynth.json
    |                  |                     -----------------------------------      
    |                  ^                                     |
    |                  |                                     v
    |          +----------------+                      +---------+
    |          | import DocSegs |                      |Annotated|
    |          |  into MongoDB  |                      | Docsegs |
    |          +----------------+                      |         |
    |                  |                               |         |
    |                  |                               |         |
    |                  |                               +----+----+
    |                  |                                    |                              +----------------------------+
    |                  |                                    |                              | UMass:                     |
    |                  +<---------<---------------<---------+----->--------->------------->| Entity/Relation extraction |
    |                  |                                                                   |                            |
    |                  |                                                                   +-------------+--------------+
    |                  ^                                                                                 |
    |                  |                                                                                 |
    |                  |                                                                                 |
    |                                                                                                    |
    |     >bin/works -include predsynth.json,umass.json   
    |     ----------------------------------------------------------                                
    |              ^   ^                                                                                 |
    |              |   |                                                                                 |
    |              |   |                                                                                 |
    |              |   |                            +---------+                                          |
    +--------------+   +------------<---------------|Annotated|----------------------<-------------------+
                                                    | Docsegs |
                                                    | (UMass) |      
                                                    |         |      
                                                    |         |      
                                                    +----+----+      
                                                          
                                                          
                                                          








#+END_EXAMPLE
